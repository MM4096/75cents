<!DOCTYPE html>
<html>
<head>
    <title>Order Page</title>
    <link rel="stylesheet" href="style.css" />
    <style>
    </style>
</head>
<body onload="timeLeft()">
    <p><strong>PLEASE DO NOT ORDER. THIS WEBPAGE IS STILL UNDER CONSTRUCTION</strong></p>
    <a href="mm4096.github.io/8jch_test/">New test page! Visit here!</a>
    <a href="mailto:enoch.wu@kingsway.school.nz">and send what you think about it here!</a>
    <div class="saleBanner" id="saleTime"></div>




    <div class="grid">
        <div><p>Item:</p></div>
        <div><p>Quantity</p></div>
        <div class="tooltip"><label for="option1">Lolly Scramble (4 pack) 
        <!--For sale, put cost inside strike element. Otherwise, place after element-->
        <!--Cost $1.00-->
        <strike></strike>
        $1.00
             
        </label><span class="tooltiptext"><img src="lollyScramble.jpg"/></span></div>

        <div><input id="option1" type="number" onchange="checkSubmit()" value="0"/></div>

        <div class="tooltip"><label for="option2">Licorice Allsorts (3 pack)
        <!--Cost $1.00-->
        <strike></strike>
        $1.00

            </label><span class="tooltiptext"><img src="licoriceAllsorts.jpg" /></span></div>

        <div><input id="option2" type="number" onchange="checkSubmit()" value="0"/></div>

        <div class="tooltip"><label for="option3">Sour Candy (5 pack)
        <!--Cost 50c use &#162-->
        <strike></strike>
        50&#162
             
        </label><span class="tooltiptext"><img src="sourCandy.jpg" /></span></div>

        <div><input id="option3" type="number" onchange="checkSubmit()" value="0"/></div>

        <div class="tooltip"><label for="option4">Chocolate Favorates (1 bar)
         <!--Cost 50c-->
        <strike></strike>    
            50&#162;
             
        </label><span class="tooltiptext"><img src="chocolateFavorates.jpg" /></span></div>

        <div><input id="option4" type="number" onchange="checkSubmit()" value="0"/></div>

        <div class="tooltip"><label for="option5">Chupa Chups (1 lollipop) 
        <!--Cost 50c-->
        <strike></strike>
        50&#162;
             
        </label><span class="tooltiptext"><img src="lollipop.jpg"/></span></div>

        <div><input id="option5" type="number" onchange="checkSubmit()" value="0"/></div>

        <div><label for="option6">2022 Calendar 
        <!--Cost $5-->
        <strike></strike>    
        
            $10.00

            </label></div>

        <div><input id="option6" type="number" onchange="checkSubmit()" value="0"/></div>


        <div class="tooltip"><label for="option7">Mystery Box &#215;1 
            <!--Cost $2.50-->
            <strike></strike>
            $2.50

            </label><span class="tooltiptext"><img src="mysteryBox.jpg" /></span></div>

        <div><input id="option7" type="number" onchange="checkSubmit()" value="0"/></div>

        <div><p>Total:</p></div>

        <div><p id="totalcost">$0.00</p></div>

    </div>
    <br />
    <a href="view.html" target="_blank">View Options</a>
    <br />
    <button onclick="costcalculate()">Calculate Cost</button>
    <br>
    <label for="name">Enter your name: </label>
    <input id="name" onchange="checkSubmit()" />
    <br>
    <label for="class">Enter your class:</label>
    <select id="class" onchange="checkSubmit()">
        <option value="null">-SELECT-</option>
        <option value="bdu">7BDU</option>
        <option value="cva">7CVA</option>
        <option value="mdu">7MDU</option>
        <option value="mle">7MLE</option>
        <option value="mwe">7MWE</option>
        <option value="zde">7ZDE</option>
        <option value="hwh">8HWH</option>
        <option value="jch">8JCH</option>
        <option value="jgr">8JGR</option>
        <option value="jps">8JPS</option>
        <option value="mvr">8MVR</option>
        <option value="spo">8SPO</option>
        <option value="afi">9AFI</option>
        <option value="bhn">9BHN</option>
        <option value="cgr">9CGR</option>
        <option value="htr">9HTR</option>
        <option value="lst">9LST</option>
        <option value="pba">9PBA</option>
        <option value="yne">9YNE</option>
    </select>
    <br>
    <br>
    <br>
    <br>
    <p class="important"><strong>IMPORTANT:</strong> please list your allergies below (We will notify you if your order contains your allergy) </p>
    <textarea rows="10" cols="40" id="allergy"></textarea>
    <br />


    <br>
    <button onclick="submit(); return false" id="enterbutton" disabled>Submit</button>
    <br />
    <br />
    <a href="why.html" target="_blank">Why we need this information</a>
    
    <p id="inputinfo"></p>
    <a href="information.html" target="_blank">What to do next</a>
    <br />
    <script>
        var totalcost;
        function submit() {
            costcalculate()
            if (confirm("Please confirm your order total: $" + totalcost)) {
                var numberOption1 = +document.getElementById("option1").value;
                var numberOption2 = +document.getElementById("option2").value;
                var numberOption3 = +document.getElementById("option3").value;
                var numberOption4 = +document.getElementById("option4").value;
                var numberOption5 = +document.getElementById("option5").value;
                var numberOption6 = +document.getElementById("option6").value;
                var numberOption7 = +document.getElementById("option7").value;
                var allergy = document.getElementById("allergy").value;
                var optionblock = document.getElementById("class");
                var optionselected = optionblock.options[optionblock.selectedIndex].text;
                var name = document.getElementById("name").value;

                var emailInfo = "Name" + name + "_ class" + optionselected + "_1:" + numberOption1 + "_2:" + numberOption2 + "_3:" + numberOption3 + "_4:" + numberOption4 + "_5:" + numberOption5 + "_6:" + numberOption6 + "_7:" + numberOption7 + "_Allergy: " + allergy;
                var emailSend = "mailto:enoch.wu@kingsway.school.nz"
                    + "?cc=leo.xu@kingsway.school.nz"
                    + "&subject=" + encodeURIComponent("Order")
                    + "&body=" + encodeURIComponent(emailInfo + "\r\rNow press <SEND>");
                window.location.href = emailSend;
            } else {
                document.getElementById("information").value = "Order Canceled."
            }
            



        }
        function costcalculate() {


            var option1cost = +document.getElementById("option1").value * 1;
            var option2cost = +document.getElementById("option2").value * 1;
            var option3cost = +document.getElementById("option3").value * 0.5;
            var option4cost = +document.getElementById("option4").value * 0.5;
            var option5cost = +document.getElementById("option5").value * 0.5;
            var option6cost = +document.getElementById("option6").value * 10;
            var option7cost = +document.getElementById("option7").value * 2.5;
            totalcost = option1cost + option2cost + option3cost + option4cost + option5cost + option6cost + option7cost;
            document.getElementById("totalcost").innerHTML = "$" + totalcost;


        }
        function checkSubmit() {
            var optionblock = document.getElementById("class");
            var button = document.getElementById("enterbutton");
            var optionselected = optionblock.options[optionblock.selectedIndex].text;
            var name = document.getElementById("name").value;
            // All below is seeing weather you haven't ordered
            var numberOption1 = +document.getElementById("option1").value;
            var numberOption2 = +document.getElementById("option2").value;
            var numberOption3 = +document.getElementById("option3").value;
            var numberOption4 = +document.getElementById("option4").value;
            var numberOption5 = +document.getElementById("option5").value;
            var numberOption6 = +document.getElementById("option6").value;
            var numberOption7 = +document.getElementById("option7").value
            if ((name.length !== 0) && (optionselected.length !== 8) && ((numberOption1 > -1) || (numberOption2 > -1) || (numberOption3 > 0) || (numberOption4 > 0) || (numberOption5 > 0) || (numberOption6 > 0) || (numberOption7 > 0))) {
                button.disabled = false;
            } else {
                button.disabled = true;
            }
        }
        window.onload = function () {
            setInterval(timeLeft(), 10000);
        };
        function timeLeft() {
            // Set the date we're counting down to
            var countDownDate = new Date("Sep 23, 2021 12:37:25").getTime();

            // Update the count down every 1 second
            var x = setInterval(function () {

                // Get today's date and time
                var now = new Date().getTime();

                // Find the distance between now and the count down date
                var distance = countDownDate - now;

                // Time calculations for days, hours, minutes and seconds
                var days = Math.floor(distance / (1000 * 60 * 60 * 24));
                var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                var seconds = Math.floor((distance % (1000 * 60)) / 1000);

                // Output the result in a div
                document.getElementById("saleTime").innerHTML ="<h2>Sale! 50% off</h2><br>Time Left: "+ days + "d " + hours + "h "
                    + minutes + "m " + seconds + "s ";

                // If the countdown is over, hide element
                if (distance < 0) {
                    clearInterval(x);
                    document.getElementById("saleTime").style.visibility = "hidden";
                }
            }, 1000);
        }
    </script>
    
</body>
</html>